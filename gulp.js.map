{"version":3,"sources":["gulp.es6"],"names":[],"mappings":"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","file":"gulp.js","sourcesContent":["var gulp = require('gulp');\r\nvar uglify = require('gulp-uglify');\r\nvar rename = require('gulp-rename');\r\nvar htmlmin = require('gulp-htmlmin');\r\nvar del = require('del');\r\nvar concatCss = require('gulp-concat-css');\r\nvar cleanCSS = require('gulp-clean-css');\r\nvar replace = require('gulp-replace');\r\nvar browserify = require('gulp-browserify');\r\n\r\nlet project = \"Review\";\r\nlet isProduction = true;\r\nlet viewModules = {\r\n    Review: [\"login\", \"display\", \"manage\"]\r\n};\r\nlet mysqlConfig = {\r\n    Review: {\r\n        user: \"root\",\r\n        password: \"root\",\r\n        database: \"Review\"\r\n    }\r\n};\r\nlet accountConfig = {\r\n    Review: {\r\n        username: \"radiumme\",\r\n        password: \"radiumme\",\r\n        usernameCookie: \"reviewUsername\",\r\n        passwordCookie: \"reviewPassword\",\r\n        loginRedirect: \"display\"\r\n    }\r\n};\r\nprocess.env.NODE_ENV = (isProduction) ? \"production\" : \"development\";\r\nif (isProduction) {\r\n    mysqlConfig.Review.password = \"kMXWy16GHVXlsEhXtwKh\";\r\n}\r\n\r\ngulp.task(\"build\", [\"build-util\", \"build-server\", \"build-client\"], ()=> {\r\n\r\n\r\n});\r\n\r\ngulp.task(\"build-server\", ()=> {\r\n    //app\r\n    gulp.src([\"src/app.js\", \"src/bin/www\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //middleware\r\n    gulp.src([\"src/Common/MiddleWare/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //models\r\n    gulp.src([\"src/Common/Models/*.js\", \"src/Projects/\" + project + \"/Models/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //config\r\n    gulp.src(\"src/Common/Config/mysql.xml\")\r\n        .pipe(replace(/\\{user}/g, mysqlConfig[project].user))\r\n        .pipe(replace(/\\{password}/g, mysqlConfig[project].password))\r\n        .pipe(replace(/\\{database}/g, mysqlConfig[project].database))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/config\"));\r\n    gulp.src(\"src/Common/Config/account.xml\")\r\n        .pipe(replace(/\\{username}/g, accountConfig[project].username))\r\n        .pipe(replace(/\\{password}/g, accountConfig[project].password))\r\n        .pipe(replace(/\\{usernameCookie}/g, accountConfig[project].usernameCookie))\r\n        .pipe(replace(/\\{passwordCookie}/g, accountConfig[project].passwordCookie))\r\n        .pipe(replace(/\\{loginRedirect}/g, accountConfig[project].loginRedirect))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/config\"));\r\n    //controller\r\n    gulp.src([\"src/Common/Controllers/*.js\", \"src/Projects/\" + project + \"/Controllers/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n\r\n});\r\n\r\ngulp.task(\"build-util\", ()=> {\r\n    //component\r\n    let componentArr = [\"login\", \"radio\", \"select\", \"table\"];\r\n    componentArr.map(d=> {\r\n        gulp.src(\"src/Common/Components/\" + d + \"/*.js\")\r\n            .pipe(gulp.dest(\"dist/\" + project + \"/util\"));\r\n    });\r\n\r\n\r\n    //util\r\n    gulp.src(\"src/Common/Utils/*.js\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/util\"));\r\n\r\n});\r\n\r\ngulp.task(\"build-client\", ()=> {\r\n    //views js\r\n    gulp.src([\"src/Common/Views/*/*.js\", \"src/Projects/\" + project + \"/Views/*/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/browserify\"))\r\n        .on(\"end\",()=>{\r\n            if (isProduction) {\r\n                gulp.src(\"dist/\" + project + \"/browserify/*/main.js\")\r\n                    .pipe(browserify({\r\n                        insertGlobals: true,\r\n                        debug: !gulp.env.production\r\n                    }))\r\n                    .pipe(rename({basename: \"bundle\"}))\r\n                    .pipe(gulp.dest(\"dist/\" + project + \"/browserify\"))\r\n                    .pipe(uglify())\r\n                    .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n            }else{\r\n                gulp.src(\"dist/\" + project + \"/browserify/*/main.js\")\r\n                    .pipe(browserify({\r\n                        insertGlobals: true,\r\n                        debug: !gulp.env.production\r\n                    }))\r\n                    .pipe(rename({basename: \"bundle\"}))\r\n                    .pipe(gulp.dest(\"dist/\" + project + \"/browserify\"))\r\n                    .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n            }\r\n        });\r\n\r\n\r\n    //views html minify\r\n    gulp.src([\"src/Common/Views/*/*.html\", \"src/Projects/\" + project + \"/Views/*/*.html\"])\r\n        .pipe(htmlmin({collapseWhitespace: true}))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n    //views css bundle and minify\r\n    viewModules[project].map(d=> {\r\n        let srcArr = [];\r\n        switch (d) {\r\n            case \"login\":\r\n                srcArr = [\"src/Common/Views/\" + d + \"/*.css\", \"src/Common/Components/login/login.css\"]\r\n                break;\r\n            case \"display\":\r\n                srcArr = [\"src/Projects/\" + project + \"/Views/\" + d + \"/*.css\",\r\n                    \"src/Common/Components/*/*.css\",\r\n                    \"src/Common/Views/common/*.css\",\r\n                    \"src/Projects/\" + project + \"/Views/common/*.css\"\r\n                ];\r\n                break;\r\n            case \"manage\":\r\n                srcArr = [\"src/Projects/\" + project + \"/Views/\" + d + \"/*.css\",\r\n                    \"src/Common/Components/*/*.css\",\r\n                    \"src/Common/Views/common/*.css\",\r\n                    \"src/Projects/\" + project + \"/Views/common/*.css\"\r\n                ];\r\n                break;\r\n        }\r\n        gulp.src(srcArr)\r\n            .pipe(concatCss(\"bundle.css\", {rebaseUrls: false}))\r\n            .pipe(cleanCSS({compatibility: 'ie8'}))\r\n            .pipe(gulp.dest(\"dist/\" + project + \"/client/\" + d));\r\n    });\r\n    //icon\r\n    gulp.src(\"src/Common/Icon/favicon.ico\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n    //fontawesome\r\n    gulp.src(\"src/Common/Fontawesome/*/*\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client/fontawesome\"));\r\n    //package.json\r\n    gulp.src(\"package.json\")\r\n        .pipe(gulp.dest(\"dist/\" + project));\r\n\r\n\r\n});"]}