{"version":3,"sources":["gulp.es6"],"names":[],"mappings":"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","file":"gulp.js","sourcesContent":["var gulp = require('gulp');\r\nvar uglify = require('gulp-uglify');\r\nvar rename = require('gulp-rename');\r\nvar htmlmin = require('gulp-htmlmin');\r\nvar del = require('del');\r\nvar concatCss = require('gulp-concat-css');\r\nvar cleanCSS = require('gulp-clean-css');\r\nvar replace = require('gulp-replace');\r\n\r\nlet project = \"Review\";\r\nlet viewModules = [\"login\", \"display\", \"manage\"];\r\nlet mysqlConfig = {\r\n    user: \"root\",\r\n    password: \"root\",\r\n    database: \"Review\"\r\n};\r\nlet accountConfig = {\r\n    username: \"radiumme\",\r\n    password: \"radiumme\",\r\n    usernameCookie: \"reviewUsername\",\r\n    passwordCookie: \"reviewPassword\",\r\n    loginRedirect:\"display\"\r\n};\r\n\r\ngulp.task(\"build\", [\"build-util\", \"build-server\", \"build-client\"], ()=> {\r\n\r\n\r\n});\r\n\r\ngulp.task(\"build-server\", ()=> {\r\n    //app\r\n    gulp.src([\"src/app.js\", \"src/bin/www\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //middleware\r\n    gulp.src([\"src/Common/MiddleWare/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //models\r\n    gulp.src([\"src/Common/Models/*.js\", \"src/Projects/\" + project + \"/Models/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n    //config\r\n    gulp.src(\"src/Common/Config/mysql.xml\")\r\n        .pipe(replace(/\\{user}/g, mysqlConfig.user))\r\n        .pipe(replace(/\\{password}/g, mysqlConfig.password))\r\n        .pipe(replace(/\\{database}/g, mysqlConfig.database))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/config\"));\r\n    gulp.src(\"src/Common/Config/account.xml\")\r\n        .pipe(replace(/\\{username}/g, accountConfig.username))\r\n        .pipe(replace(/\\{password}/g, accountConfig.password))\r\n        .pipe(replace(/\\{usernameCookie}/g, accountConfig.usernameCookie))\r\n        .pipe(replace(/\\{passwordCookie}/g, accountConfig.passwordCookie))\r\n        .pipe(replace(/\\{loginRedirect}/g, accountConfig.loginRedirect))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/config\"));\r\n    //controller\r\n    gulp.src([\"src/Common/Controllers/*.js\", \"src/Projects/\" + project + \"/Controllers/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/server/js\"));\r\n\r\n});\r\n\r\ngulp.task(\"build-util\", ()=> {\r\n    //component\r\n    let componentArr = [\"login\",\"radio\",\"select\",\"table\"];\r\n    componentArr.map(d=>{\r\n        gulp.src(\"src/Common/Components/\"+d+\"/*.js\")\r\n            .pipe(gulp.dest(\"dist/\" + project + \"/util\"));\r\n    });\r\n\r\n\r\n    //util\r\n    gulp.src(\"src/Common/Utils/*.js\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/util\"));\r\n\r\n});\r\n\r\ngulp.task(\"build-client\", ()=> {\r\n    //views js\r\n    gulp.src([\"src/Common/Views/*/*.js\", \"src/Projects/\" + project + \"/Views/*/*.js\"])\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/browserify\"));\r\n    //views html minify\r\n    gulp.src([\"src/Common/Views/*/*.html\", \"src/Projects/\" + project + \"/Views/*/*.html\"])\r\n        .pipe(htmlmin({collapseWhitespace: true}))\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n    //views css bundle and minify\r\n    viewModules.map(d=> {\r\n        let srcArr = [];\r\n        switch (d) {\r\n            case \"login\":\r\n                srcArr = [\"src/Common/Views/\" + d + \"/*.css\", \"src/Common/Components/login/login.css\"]\r\n                break;\r\n            case \"display\":\r\n                srcArr = [\"src/Projects/\" + project + \"/Views/\" + d + \"/*.css\",\r\n                    \"src/Common/Components/*/*.css\",\r\n                    \"src/Common/Views/common/*.css\",\r\n                    \"src/Projects/\" + project + \"/Views/common/*.css\"\r\n                ];\r\n                break;\r\n            case \"manage\":\r\n                srcArr = [\"src/Projects/\" + project + \"/Views/\" + d + \"/*.css\",\r\n                    \"src/Common/Components/*/*.css\",\r\n                    \"src/Common/Views/common/*.css\",\r\n                    \"src/Projects/\" + project + \"/Views/common/*.css\"\r\n                ];\r\n                break;\r\n        }\r\n        gulp.src(srcArr)\r\n            .pipe(concatCss(\"bundle.css\", {rebaseUrls: false}))\r\n            .pipe(cleanCSS({compatibility: 'ie8'}))\r\n            .pipe(gulp.dest(\"dist/\" + project + \"/client/\" + d));\r\n    });\r\n    //icon\r\n    gulp.src(\"src/Common/Icon/favicon.ico\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n    //fontawesome\r\n    gulp.src(\"src/Common/Fontawesome/*/*\")\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client/fontawesome\"));\r\n    //package.json\r\n    gulp.src(\"package.json\")\r\n        .pipe(gulp.dest(\"dist/\" + project));\r\n});\r\n\r\ngulp.task(\"release\", ()=> {\r\n    //client js minify\r\n    gulp.src(\"dist/\" + project + \"/client/*/bundle.js\")\r\n        .pipe(uglify())\r\n        .pipe(gulp.dest(\"dist/\" + project + \"/client\"));\r\n});\r\n"]}