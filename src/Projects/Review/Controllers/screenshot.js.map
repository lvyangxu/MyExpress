{"version":3,"sources":["screenshot.es6"],"names":[],"mappings":";;AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,WAAW,QAAQ,YAAR,CAAf;AACA,IAAI,SAAS,QAAQ,YAAR,CAAb;AACA,OAAO,OAAP,GAAiB;AACb,cAAU,kBAAC,GAAD,EAAM,GAAN,EAAa;AACnB,YAAI,SAAS,EAAb;AACA,eAAO,KAAP,CAAa,WAAb,CAAyB,qCAAqC,IAAI,IAAJ,CAAS,IAA9C,GAAqD,GAA9E,EAAmF,IAAnF,CAAwF,aAAI;AACxF,gBAAI,KAAK,EAAE,CAAF,EAAK,EAAd;AACA,gBAAI,cAAc,IAAlB;AACA,gBAAI;AACA,yBAAS,GAAG,WAAH,CAAe,sBAAsB,EAAtB,GAA2B,GAA1C,CAAT;AACA,yBAAS,OAAO,GAAP,CAAW,UAAC,EAAD,EAAK,CAAL,EAAU;AAC1B,wBAAI,KAAK,CAAT,EAAY;AACR,4BAAI,OAAO,OAAO,sBAAsB,EAAtB,GAA2B,GAA3B,GAAiC,EAAxC,CAAX;AACA,sCAAc,KAAK,KAAL,GAAa,KAAK,MAAhC;AACH;AACD,yBAAK,EAAC,IAAI,EAAL,EAAS,WAAW,EAApB,EAAL;AACA,2BAAO,EAAP;AACH,iBAPQ,CAAT;AAQH,aAVD,CAUE,OAAO,CAAP,EAAU,CAEX;AACD,gBAAI,IAAJ,CAAS,EAAC,SAAS,MAAV,EAAkB,SAAS,EAAC,KAAK,MAAN,EAAc,aAAa,WAA3B,EAA3B,EAAT;AACH,SAjBD,EAiBG,KAjBH,CAiBS,aAAI;AACT,gBAAI,IAAJ,CAAS,EAAC,SAAS,MAAV,EAAkB,SAAS,EAAC,KAAK,MAAN,EAAc,aAAa,WAA3B,EAA3B,EAAT;AACH,SAnBD;AAoBH;AAvBY,CAAjB","file":"screenshot.js","sourcesContent":["let fs = require(\"fs\");\r\nlet response = require(\"./response\");\r\nlet sizeOf = require('image-size');\r\nmodule.exports = {\r\n    getNames: (req, res)=> {\r\n        let dirArr = [];\r\n        global.mysql.excuteQuery(\"select id from game where name='\" + req.body.name + \"'\").then(d=> {\r\n            let id = d[0].id;\r\n            let isLandscape = true;\r\n            try {\r\n                dirArr = fs.readdirSync(\"client/data/game/\" + id + \"/\");\r\n                dirArr = dirArr.map((d1, i)=> {\r\n                    if (i == 0) {\r\n                        let size = sizeOf(\"client/data/game/\" + id + \"/\" + d1);\r\n                        isLandscape = size.width > size.height;\r\n                    }\r\n                    d1 = {id: id, imageName: d1};\r\n                    return d1;\r\n                });\r\n            } catch (e) {\r\n\r\n            }\r\n            res.send({success: \"true\", message: {dir: dirArr, isLandscape: isLandscape}});\r\n        }).catch(d=> {\r\n            res.send({success: \"true\", message: {dir: dirArr, isLandscape: isLandscape}});\r\n        });\r\n    }\r\n};"]}